# Quality & Learning Skills

## te-review — Multi-Dimensional Post-Trade Review

**Purpose**: Parallel review across 5 dimensions with priority-gated findings. Pushes judgment calls into deterministic sub-checks wherever possible.

**Workflow**:
- Phase 0: Load completed trade record, plan, thesis
- Phase 1: Fan out parallel review across 5 dimensions
- Phase 2: Consolidate findings with priorities
- Phase 3: Write findings to plan

### Review Dimensions

**1. Thesis Quality**
- Was the thesis directionally correct? (Computed from P&L sign)
- Did the catalyst occur? (Computed: if `catalyst_type: event` and `catalyst_date` passed, check P&L)
- Did price reach the target? (Computed)
- Was invalidation condition triggered during hold? (Computed from price history)

**2. Execution Quality**
- Entry slippage: `actual_fill - planned_price` (Computed)
- Exit slippage (Computed)
- Stop respected: `actual_exit vs planned_stop` (Computed — detects stop violations)
- Fill quality relative to VWAP or mid-price (Computed)

**3. Risk Management**
- Position size vs what risk-size approved (Computed)
- Maximum adverse excursion vs stop distance (Computed)
- Correlation behavior vs expectation (Computed)

**4. Behavioral** — breaks "did emotions influence?" into deterministic proxies:
- `deviation_count`: how many plan deviations? (Computed from fills vs plan)
- `stop_moved_count`: how many stop adjustments, in which direction? (Computed from order history)
- `unplanned_scale_count`: adds/trims not in plan? (Computed)
- `hold_duration_vs_plan`: held significantly shorter/longer than planned? (Computed)
- `entry_to_exit_time` vs `plan.time_horizon` (Computed — flags if held 2hrs on a 1-week plan)

If `deviation_count > 0` AND `stop_moved_count > 0 in losing direction` AND `hold_duration << planned`, the system mechanically flags `BEHAVIORAL_PATTERN: high`.

**5. Market Read**
- Regime classification accuracy: was the regime at entry what the strategy expected? (Computed)
- Volatility estimate vs realized (Computed)

### Finding Priorities

| Priority | Meaning | Blocks Learning Completion? |
|----------|---------|---------------------------|
| `critical` | Blew past stop, exceeded risk limit, no thesis before entry | Yes |
| `high` | Emotional exit, mental stop, wrong sizing, stop violation | Yes |
| `medium` | Could have gotten better fill, suboptimal timing | No |
| `low` | Minor slippage, slightly off-plan hold duration | No |

---

## te-learn — Learning Loop

**Purpose**: Extract patterns from outcomes and convert them into durable guardrails. The compounding engine.

**Workflow**:
- Phase 0: Load review findings
- Phase 1: Pattern detection across recent trades
- Phase 2: Generate rule proposals with testable hypotheses
- Phase 3: Update strategy docs, anti-patterns, edge inventory
- Phase 4: Archive completed trade

**Rule proposal format** — every rule born from `te-learn` gets:

```yaml
id: <auto-generated>
status: proposed
created: <timestamp>
created_from: <trade slug that triggered this>
hypothesis: "<what this rule should improve>"
test_metric: <win_rate | expectancy | sharpe | mfe_capture>
test_population: "<query defining which trades this rule applies to>"
baseline_at_creation:
  sample_size: <n>
  metric_value: <current value of test_metric for population>
review_cadence: after_<n>_qualifying_trades
```

**Deterministic gates**:
- Critical/high findings must produce at least one update to `rules/`, `risk-rules.md`, or `anti-patterns.md` — lint for the file diff
- If `STOP_VIOLATION` flagged, a runbook addressing stop discipline must exist
- Performance stats auto-computed from fills (win rate, avg winner/loser, expectancy, Sharpe, max drawdown)
- 3+ consecutive losses in same strategy → auto-generate mandatory strategy review

**Anomaly detection** (runs on rolling window of recent trades):

```
Pattern: Poor MFE capture (capturing < 30% of available move)
  → Hypothesis: take profit too tight or trailing stop too aggressive
  → Proposal: WIDEN_TP_OR_LOOSEN_TRAIL

Pattern: Stops too tight (30%+ of trades nearly stop out then recover)
  → Hypothesis: stop within normal noise range
  → Proposal: WIDEN_STOP

Pattern: Consistent loss in specific time window
  → Hypothesis: negative expectancy during this window
  → Proposal: RESTRICT_TIME_WINDOW
```

Loop 1 proposes these changes. Loop 2 evaluates them with statistical rigor.

---

## te-journal — Trade Journal Maintenance

**Purpose**: Recurring analysis for drift detection and performance tracking. Analogous to Harness `he-doc-gardening`.

**Cadence**: Weekly minimum, or when triggered by threshold breach.

**Automated computations**:
- Weekly P&L with strategy attribution
- Win rate, average winner/loser, expectancy by strategy
- Equity curve with drawdown tracking
- Sharpe ratio evolution (rolling)
- Rule compliance rate (are rules being respected or bypassed?)
- Strategy drift detection (are you slowly violating your own rules?)

**Trigger conditions**:
- Monthly: full strategy review
- Quarterly: comprehensive meta-review
- On breach: any kill switch activation triggers immediate review
